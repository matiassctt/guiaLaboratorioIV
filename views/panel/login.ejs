<html>
	<head>
	</head>
	<body>
		<h1>PANTALLA LOGIN</h1>

		<p>Estado del usuario <%= logeado %></p>
		<% if (logeado) { %>
			<h2>Ya estas logeado</h2>
		<% } %>
		
		<label>Usuario</label>
		<input type="text" id="usuario_email">
		
		<label>Password</label>
		<input type="password" id="usuario_password">

		<button class="enviar">Enviar datos</button>

		<script type="text/javascript">
			const inputEmail = document.querySelector("#usuario_email");
			const inputPassword = document.querySelector("#usuario_password");
			const buttonEnviar = document.querySelector(".enviar");

			buttonEnviar.addEventListener("click", async () => {
				const result = await fetch("/login", {
					method: "POST",
					headers: {
						"content-type": "application/json",
					},
					body: JSON.stringify({
						email: inputEmail.value,
						password: inputPassword.value
					}),
				});

				const data = await result.json();

				if (data.error == 1) {
					alert ("Usuario o contrase√±a incorrecta");
				} else {
					alert ("Login correcto");
				}
			});
		</script>
	</body>
</html>